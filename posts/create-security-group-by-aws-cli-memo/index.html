<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <meta name="author" content="thara">
  <title>aws-cliでSecurityGroupを作成するときのメモ | thara.dev</title>
  <link rel="stylesheet" href="https://thara.dev/css/main.css">
</head>
<body>
  <header>
    <h1>
      <a href="https://thara.dev">thara.dev</a>
    </h1>
  </header>
  <div role="main">
    <div>
      <h1>aws-cliでSecurityGroupを作成するときのメモ</h1>
      <span>2017-06-06</span>
    </div>
    <article>
    <p>これも毎回ググってる気がするのでメモ。</p>
<pre><code class="language-sh">$ GROUP_ID=`aws --profile=${プロファイル名｝ ec2 create-security-group \
    --group-name ${新規セキュリティグループ名} \
    --description ${説明} --vpc-id ${VPCのID} | jq -r &quot;.GroupId&quot;`

</code></pre>
<p>全開になっている22ポートを塞ぐ・・・が、そんなルールがないと怒られた。<br>
昔はデフォで22空いてたような気がしたけど、気のせい・・・？</p>
<pre><code class="language-sh">$ aws --profile=${プロファイル名｝ ec2 revoke-security-group-ingress \
    --group-id $GROUP_ID --protocol tcp --port 22 --cidr &quot;0.0.0.0/0&quot;
</code></pre>
<p>一例）　<code>192.168.1.0/24</code> からの22ポートと80ポートへのアクセスを許可</p>
<pre><code class="language-sh">$ aws --profile=${プロファイル名｝ ec2 authorize-security-group-ingress --group-id $GROUP_ID \
    --protocol tcp --port 22 --cidr &quot;192.168.1.0/24&quot;
$ aws --profile=${プロファイル名｝ ec2 authorize-security-group-ingress --group-id $GROUP_ID \
    --protocol tcp --port 80 --cidr &quot;192.168.1.0/24&quot;
</code></pre>

    </article>
  </div>
  <footer>
  <small>
    <a href="https://thara.dev">Home</a>
    | <a href="https://github.com/thara/thara.github.io">GitHub</a>
    | <a href="https://thara.dev/about">About</a>
    | <a href="https://thara.dev/resume-ja">Resume(ja)</a>
    | &copy; 2022 thara
  </small>
</footer>
</body>
</html>

